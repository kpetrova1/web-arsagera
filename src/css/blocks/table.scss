@use "../general/mixins" as *;

.table {
  $root: &;

  // CSS Custom Properties
  --border-color: var(--gray-light);
  --border-sticky-color: var(--blue);
  --odd-color: var(--gray-bg);
  --even-color: var(--white);
  --cell-height: 58px;
  --cell-padding: 6px 13px;
  --head-padding: 0 12px 15px 12px;
  --border-radius: 4px;
  --border-width: 2px;

  border-collapse: separate;

  // Modifiers
  &_full-width {
    width: 100%;
  }

  // Modifiers
  &_nowrap {
    #{$root}__cell {
      white-space: nowrap;
    }
  }

  // Elements
  &__row {
    // Zebra striping
    &:nth-child(odd) #{$root}__cell {
      background-color: var(--odd-color);
    }

    &:nth-child(even) #{$root}__cell {
      background-color: var(--even-color);
    }

    // Border management
    &:first-child #{$root}__cell {
      border-top: var(--border-width) solid var(--border-color);
    }

    &:last-child #{$root}__cell {
      border-bottom: var(--border-width) solid var(--border-color);
    }

    // Cell borders
    #{$root}__cell {
      &:first-child {
        border-left: var(--border-width) solid var(--border-color);
      }

      &:last-child {
        border-right: var(--border-width) solid var(--border-color);
      }
    }

    // Border radius corners
    &:first-child {
      #{$root}__cell:first-child {
        border-top-left-radius: var(--border-radius);
      }

      #{$root}__cell:last-child {
        border-top-right-radius: var(--border-radius);
      }
    }

    &:last-child {
      #{$root}__cell:first-child {
        border-bottom-left-radius: var(--border-radius);
      }

      #{$root}__cell:last-child {
        border-bottom-right-radius: var(--border-radius);
      }
    }
  }

  &__cell {
    @include font(16px, 20px, 400);
    height: var(--cell-height);
    padding: var(--cell-padding);

    white-space: normal;

    // Sticky cells
    &.is-sticky {
      position: sticky;
      left: 0;

      text-align: left;

      .has-scroll & {
        border-right: var(--border-width) solid var(--border-color);
      }
    }
  }

  &__head {
    #{$root}__row #{$root}__cell {
      height: auto;
      padding: var(--head-padding);

      border: none;

      background-color: var(--white);

      color: var(--gray-dark);
      font-weight: 400;
    }
  }

  // Modifiers with specific styling
  &_blue {
    &.has-scroll {
      #{$root}__body {
        #{$root}__row {
          &:first-child #{$root}__cell.is-sticky {
            border-top: var(--border-width) solid var(--border-sticky-color);
          }

          &:last-child #{$root}__cell.is-sticky {
            border-bottom: var(--border-width) solid var(--border-sticky-color);
          }
        }

        #{$root}__cell.is-sticky {
          border-right: var(--border-width) solid var(--border-sticky-color);
          border-left: var(--border-width) solid var(--border-sticky-color);
        }
      }
    }
  }

  &_blue-outline {
    #{$root}__body {
      #{$root}__cell {
        padding-top: 20px;
        padding-bottom: 20px;
      }

      #{$root}__row {
        &:first-child #{$root}__cell {
          border-top: var(--border-width) solid var(--blue);
        }

        &:last-child #{$root}__cell {
          border-bottom: var(--border-width) solid var(--blue);
        }
      }

      #{$root}__cell {
        &:first-child {
          border-left: var(--border-width) solid var(--blue);
        }

        &:last-child {
          border-right: var(--border-width) solid var(--blue);
        }
      }
    }
  }

  &_main {
    width: 100%;

    #{$root}__cell {
      padding: 0 10px;

      white-space: nowrap;
    }

    #{$root}__cell:first-child {
      padding-left: 0;
    }

    #{$root}__cell:not(.is-sticky) {
      text-align: center;
    }

    #{$root}__main-link {
      display: flex;
      align-items: center;
      margin-top: -2px;
      margin-left: -2px;

      gap: 12px;

      #{$root}__row:first-child & {
        margin-top: -1px;
      }

      #{$root}__row:last-child & {
        margin-bottom: -1px;
      }

      @include hover {
        #{$root}__main-link-icon {
          background-color: var(--orange);

          color: var(--white);
        }
      }
    }

    #{$root}__main-link-icon {
      display: flex;
      flex-shrink: 0;
      align-items: center;
      justify-content: center;
      width: 60px;
      height: 60px;

      transition:
        0.2s color linear,
        0.2s background-color linear;

      border: 2px solid var(--orange);

      background-color: var(--white);

      color: var(--orange);
    }
  }

  &_main-mobile {
    width: 100%;

    #{$root}__cell {
      height: auto;
      padding: 6px;
    }

    #{$root}__cell:first-child {
      text-align: right;
    }

    #{$root}__cell:last-child {
      text-align: left;
    }

    #{$root}__cell[colspan] {
      text-align: center;
    }
  }

  &_product {
    width: 100%;

    th {
      text-align: left;
    }

    td {
      text-align: center;
    }

    .table__cell {
      width: 50%;
      padding: 12px;

      vertical-align: middle;
    }

    .table__row_sub {
      .table__cell:first-child {
        padding-left: 40px;

        text-align: left;

        @include up(md) {
          padding-left: 100px;
        }
      }
    }

    @include down(md) {
      .table__element,
      .table__body,
      .table__row,
      .table__cell {
        display: block;
      }

      .table__body {
        border: 2px solid var(--gray-light);
        border-radius: 4px;
      }

      .table__cell {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: auto;
        min-height: 68px;
        padding-top: 12px;
        padding-bottom: 12px;
        border: none !important; // stylelint-disable-line
        border-radius: 0 !important; // stylelint-disable-line

        text-align: center;
      }

      .table__row:has(> :nth-child(2):nth-last-child(1)) .table__cell {
        width: 100%;
      }

      .table__row.table__row_sub:nth-child(odd) .table__cell:nth-child(odd),
      .table__row.table__row_sub:nth-child(even) .table__cell:nth-child(odd),
      .table__row:nth-child(odd) .table__cell:nth-child(even) {
        background-color: var(--white);
      }

      .table__row:nth-child(even) .table__cell:nth-child(odd) {
        background-color: var(--gray-bg);
      }

      .table__row {
        &_sub {
          display: grid;
          grid-auto-columns: 1fr;
          grid-auto-flow: column;
        }
      }
    }
  }
}
